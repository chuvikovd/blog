<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <base href=/ > <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:300,400,700|Roboto+Slab&display=swap" rel=stylesheet> <link href=apple-touch-icon.png rel=apple-touch-icon sizes=180x180> <link href=favicon-32x32.png rel=icon sizes=32x32 type=image/png> <link href=favicon-16x16.png rel=icon sizes=16x16 type=image/png> <link href=site.webmanifest rel=manifest> <link href=client/main.4245177753.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>Creating static blog with Sapper, TailwindCSS and Github pages - Part 3 | chuva.dev</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-156495800-1"></script><script>window.dataLayer = window.dataLayer || []
    function gtag() {
      dataLayer.push(arguments)
    }
    gtag('js', new Date())

    gtag('config', 'UA-156495800-1') </script><meta content="How to create static blog with Svelte 3, Sapper, TailwindCSS and deploy Github pages - categories and pagination" name=description><noscript id=sapper-head-end></noscript> </head> <body> <div id=sapper> <main class=min-h-screen><div class="flex flex-wrap container m-auto max-w-5xl pb-8 px-4 relative"><div class="flex absolute active after:-z-1 after:absolute after:bg-cyan after:empty-content after:h-6 after:w-6 cursor-pointer p-5 right-0 top-0 transition-mode z-10"><svg class="mr-2 w-8" viewBox="0 0 24 24"><path class=fill-yellow d="M17 12c0 2.762-2.238 5-5 5s-5-2.238-5-5 2.238-5 5-5 5 2.238 5
      5zm-5-7c.34 0 .672.033 1 .08v-2.08h-2v2.08c.328-.047.66-.08 1-.08zm-4.184
      1.401l-1.472-1.473-1.415 1.415 1.473 1.473c.402-.537.878-1.013
      1.414-1.415zm9.782 1.414l1.473-1.473-1.414-1.414-1.473 1.473c.537.402
      1.012.878 1.414 1.414zm-5.598 11.185c-.34
      0-.672-.033-1-.08v2.08h2v-2.08c-.328.047-.66.08-1 .08zm4.185-1.402l1.473
      1.473 1.415-1.415-1.473-1.472c-.403.536-.879 1.012-1.415
      1.414zm-11.185-5.598c0-.34.033-.672.08-1h-2.08v2h2.08c-.047-.328-.08-.66-.08-1zm13.92-1c.047.328.08.66.08
      1s-.033.672-.08 1h2.08v-2h-2.08zm-12.519 5.184l-1.473 1.473 1.414 1.414
      1.473-1.473c-.536-.402-1.012-.877-1.414-1.414z"></path></svg> <svg class=w-5 viewBox="0 0 24 24" transform=rotate(-40)><path class=fill-pink d="M12 10.999c1.437.438 2.562 1.564 2.999 3.001.44-1.437 1.565-2.562
      3.001-3-1.436-.439-2.561-1.563-3.001-3-.437 1.436-1.562 2.561-2.999
      2.999zm8.001.001c.958.293 1.707 1.042 2 2.001.291-.959 1.042-1.709
      1.999-2.001-.957-.292-1.707-1.042-2-2-.293.958-1.042 1.708-1.999
      2zm-1-9c-.437 1.437-1.563 2.562-2.998 3.001 1.438.44 2.561 1.564 3.001
      3.002.437-1.438 1.563-2.563
      2.996-3.002-1.433-.437-2.559-1.564-2.999-3.001zm-7.001 22c-6.617
      0-12-5.383-12-12s5.383-12 12-12c1.894 0 3.63.497 5.37 1.179-2.948.504-9.37
      3.266-9.37 10.821 0 7.454 5.917 10.208 9.37 10.821-1.5.846-3.476
      1.179-5.37 1.179z"></path></svg></div> <div class="w-full flex-col justify-center md:w-5/12 pt-4 relative transition-padding"><a href=.><h1 class="font-display font-bold inline-block text-4xl whitespace-no-wrap">chuva <span class="-ml-5 text-red">.dev</span></h1></a></div> <nav class="flex pb-2 transition-padding border-b flex-wrap justify-between mt-4 w-full"><ul class="flex pb-2 transition-padding font-display list-none text-sm"><li class=mr-6><a href=blog class=hover:text-red rel=prefetch>Blog</a></li> <li class=mr-6><a href=blog/categories class=hover:text-red rel=prefetch>Categories </a></li> <li class=mr-6><a href=blog/hello-world class=hover:text-red rel=prefetch>About</a></ul> <ul class="flex pb-2 transition-padding font-display list-none text-sm"><li class=mr-6><a href=https://github.com/chuvikovd/ class=hover:text-red target=_blank>Github </a></li> <li><a href=https://www.linkedin.com/in/chuvikovd/ class=hover:text-red target=_blank>LinkedIn </a></ul></nav> <article class="w-full first:mt-0 mt-8"><h4 class="font-display font-bold"><a href=blog/categories/Svelte class=hover:text-red rel=prefetch>Svelte, </a><a href=blog/categories/Sapper class=hover:text-red rel=prefetch>Sapper, </a><a href=blog/categories/TailwindCSS class=hover:text-red rel=prefetch>TailwindCSS </a></h4> <h2 class="font-display font-bold leading-tight mb-1 md:text-4xl text-3xl">Creating static blog with Sapper, TailwindCSS and Github pages - Part 3</h2> <h5 class="font-display font-light">March 21, 2020, 3 min read</h5> </article> <div class="w-full markdown mt-6"><p>This is the third part of the <a href=./blog/creating-static-blog class=link>tutorial series</a> about creating static blog with Sapper, TailwindCSS and Github pages. In this part we are going to add categories and pagination to our blog.</p> <p>First of all, let's create pagination component:</p> <pre><code class="hljs language-html"><span class=hljs-comment>&lt;!-- src/components/Pagination.svelte --></span>

<span class=hljs-tag>&lt;<span class=hljs-name>script</span>></span><span class=javascript>
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> prevLink = <span class=hljs-literal>null</span>, nextLink = <span class=hljs-literal>null</span>
</span><span class=hljs-tag>&lt;/<span class=hljs-name>script</span>></span>

{#if prevLink || nextLink}
  <span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>class</span>=<span class=hljs-string>"flex justify-between border-t border-black py-4"</span>></span>
    {#if prevLink}
      <span class=hljs-tag>&lt;<span class=hljs-name>a</span>
        <span class=hljs-attr>rel</span>=<span class=hljs-string>"prefetch"</span>
        <span class=hljs-attr>href</span>=<span class=hljs-string>{prevLink}</span>
        <span class=hljs-attr>class</span>=<span class=hljs-string>"text-gray-600 hover:text-gray-900 hover:underline"</span>></span>
        Older
      <span class=hljs-tag>&lt;/<span class=hljs-name>a</span>></span>
    {/if}
    {#if nextLink}
      <span class=hljs-tag>&lt;<span class=hljs-name>a</span>
        <span class=hljs-attr>rel</span>=<span class=hljs-string>"prefetch"</span>
        <span class=hljs-attr>href</span>=<span class=hljs-string>{nextLink}</span>
        <span class=hljs-attr>class</span>=<span class=hljs-string>"ml-auto text-gray-600 hover:text-gray-900 hover:underline"</span>></span>
        Newer
      <span class=hljs-tag>&lt;/<span class=hljs-name>a</span>></span>
    {/if}
  <span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>
{/if}</code></pre><p>And modify <code>Item</code> component:</p> <pre><code class="hljs language-diff">&lt;a class="block mt-6" href={`/blog/${post.slug}`} rel="prefetch">
<span class=hljs-addition>+ &lt;h4 class="font-medium"></span>
<span class=hljs-addition>+   {#each post.categories as category, i}</span>
<span class=hljs-addition>+     &lt;a</span>
<span class=hljs-addition>+       rel="prefetch"</span>
<span class=hljs-addition>+       href={`blog/category/${category}`}</span>
<span class=hljs-addition>+       class="text-gray-600 hover:text-gray-900 hover:underline"></span>
<span class=hljs-addition>+       {category}{i !== post.categories.length - 1 ? ', ' : ''}</span>
<span class=hljs-addition>+     &lt;/a></span>
<span class=hljs-addition>+   {/each}</span>
<span class=hljs-addition>+ &lt;/h4></span>
  &lt;h3</code></pre><p>Then, we need to modify <code>src/routes/blog/_posts.js</code>:</p> <pre><code class="hljs language-javascript"><span class=hljs-comment>// before</span>
<span class=hljs-keyword>const</span> { title, description, created, updated } = data

<span class=hljs-comment>// after</span>
<span class=hljs-keyword>const</span> { title, description, created, updated, categories } = data</code></pre><p>And also include <code>categories</code> in object returned from this function.</p> <p>As you might remember, this data comes from our <code>.md</code> files with help of <a href=https://www.npmjs.com/package/gray-matter class=link rel=nofollow target=_blank>gray-mater</a> package. So, now we can add categories field to all of our posts. For example:</p> <pre><code class="hljs language-javascript">---
categories: [<span class=hljs-string>'Svelte'</span>, <span class=hljs-string>'Sapper'</span>, <span class=hljs-string>'TailwindCSS'</span>]
---</code></pre><p>Then, we will create <code>src/utils.js</code> file with one constant and one function:</p> <pre><code class="hljs language-javascript"><span class=hljs-keyword>export</span> <span class=hljs-keyword>const</span> POSTS_PER_PAGE = <span class=hljs-number>5</span>;

<span class=hljs-keyword>export</span> <span class=hljs-keyword>const</span> getParams = <span class=hljs-function><span class=hljs-params>params</span> =></span> {
  <span class=hljs-keyword>const</span> { rest } = params;
  <span class=hljs-keyword>const</span> category = rest[<span class=hljs-number>0</span>] === <span class=hljs-string>"category"</span> ? rest[<span class=hljs-number>1</span>] : <span class=hljs-literal>null</span>;
  <span class=hljs-keyword>const</span> page = rest.length === <span class=hljs-number>4</span> ? rest[<span class=hljs-number>3</span>] : category ? <span class=hljs-number>1</span> : rest[<span class=hljs-number>1</span>];

  <span class=hljs-keyword>return</span> { category, page };
};</code></pre><p>I am pretty sure you got what constant means, but for function, I will explain. We will support blog urls with formats:</p> <ul> <li><code>/blog</code></li> <li><code>/blog/category/{{category}}</code></li> <li><code>/blog/page/{{page}}</code></li> <li><code>/blog/category/{{category}}/page{{page}}</code></li> </ul> <p><code>getParams</code> function is desired to take params from url, and extract <code>category</code> and <code>page</code>. The fallback value for <code>category</code> is null, but for <code>page</code> is 1.</p> <p>Now, we can start modifying <code>*.json.js</code> and route <code>*.svelte</code> files. Let's start with simple one, <code>src/routes/blog/latest.json.js</code>:</p> <pre><code class="hljs language-diff">  created: post.created,
<span class=hljs-deletion>- excerpt: post.excerpt</span>
<span class=hljs-addition>+ excerpt: post.excerpt,</span>
<span class=hljs-addition>+ categories: post.categories</span>
};</code></pre><p>Then, <code>src/routes/blog/index.json.js</code>:</p> <pre><code class="hljs language-javascript"><span class=hljs-keyword>import</span> posts <span class=hljs-keyword>from</span> <span class=hljs-string>"./_posts.js"</span>;
<span class=hljs-keyword>import</span> { POSTS_PER_PAGE } <span class=hljs-keyword>from</span> <span class=hljs-string>"../../utils.js"</span>;

<span class=hljs-keyword>export</span> <span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>get</span>(<span class=hljs-params>req, res</span>) </span>{
  <span class=hljs-keyword>const</span> paginated = posts.slice(<span class=hljs-number>0</span>, POSTS_PER_PAGE);

  <span class=hljs-keyword>const</span> mapped = paginated.map(<span class=hljs-function><span class=hljs-params>post</span> =></span> ({
    <span class=hljs-attr>title</span>: post.title,
    <span class=hljs-attr>slug</span>: post.slug,
    <span class=hljs-attr>created</span>: post.created,
    <span class=hljs-attr>excerpt</span>: post.excerpt,
    <span class=hljs-attr>categories</span>: post.categories
  }));

  res.writeHead(<span class=hljs-number>200</span>, {
    <span class=hljs-string>"Content-Type"</span>: <span class=hljs-string>"application/json"</span>
  });

  res.end(
    <span class=hljs-built_in>JSON</span>.stringify({
      <span class=hljs-attr>posts</span>: mapped,
      <span class=hljs-attr>hasMore</span>: posts.length > POSTS_PER_PAGE
    })
  );
}</code></pre><p>Finally, modify <code>src/routes/blog/index.svelte</code>. <code>context="module"</code> part:</p> <pre><code class="hljs language-diff">&lt;script context="module">
  export function preload({ params, query }) {
    return this.fetch(`blog.json`)
      .then(r => r.json())
<span class=hljs-deletion>-     .then(posts => {</span>
<span class=hljs-deletion>-       return { posts };</span>
<span class=hljs-addition>+     .then(({ posts, hasMore }) => {</span>
<span class=hljs-addition>+       return { posts, hasMore };</span>
      });
  }
&lt;/script></code></pre><p>Also, import <code>Pagination</code> component, expose <code>hasMore</code> prop, and add <code>Pagination</code> to template:</p> <pre><code class="hljs language-html"><span class=hljs-tag>&lt;<span class=hljs-name>Pagination</span> <span class=hljs-attr>prevLink</span>=<span class=hljs-string>{hasMore</span> ? '<span class=hljs-attr>blog</span>/<span class=hljs-attr>page</span>/<span class=hljs-attr>2</span>' <span class=hljs-attr>:</span> <span class=hljs-attr>null</span>} /></span></code></pre><p>Lastly, we need to add 2 more files to <code>src/routes/blog</code> - <a href=https://github.com/chuvikovd/sapper-blog-tutorial/commit/1ecd0733d40a4dab41445468a8df45124348a2e4#diff-fc9addbb5f278dca41d7914980ca47b2R1 class=link rel=nofollow target=_blank>[...rest].json.js</a> and <a href=https://github.com/chuvikovd/sapper-blog-tutorial/commit/1ecd0733d40a4dab41445468a8df45124348a2e4#diff-8685983ab3933e710ae9668373a08f8dR1 class=link rel=nofollow target=_blank>[...rest].svelte</a>. You can see contents by following links.</p> <blockquote> <p>Note: before starting to work on this part, I created more example posts in tutorial project using <a href=https://jaspervdj.be/lorem-markdownum/ class=link rel=nofollow target=_blank>Lorem Markdownum</a>.</p> </blockquote> <p>Now, our blog is categorized and properly paginated, give a try by running:</p> <pre><code class="hljs language-bash">yarn dev</code></pre><p>and following <a href=http://localhost:3000 class=link rel=nofollow target=_blank>http://localhost:3000</a></p> <p>That's all for this part. Stay tuned, more interesting stuff is coming.</p> </div> <div class="flex border-t flex-col justify-between pt-8 sm:flex-row text-center w-full"><span>© 2020 Dmitrijs Čuvikovs</span> <span>Powered by <a href=https://svelte.dev/ class=link target=_blank>Svelte</a>, icons by <a href=https://iconmonstr.com class=link target=_blank>iconmonstr</a></span></div></div></main></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,{post:{title:"Creating static blog with Sapper, TailwindCSS and Github pages - Part 3",description:"How to create static blog with Svelte 3, Sapper, TailwindCSS and deploy Github pages - categories and pagination",slug:"creating-static-blog-part-3",html:"\u003Cp\u003EThis is the third part of the \u003Ca class=\"link\" href=\".\u002Fblog\u002Fcreating-static-blog\"\u003Etutorial series\u003C\u002Fa\u003E about creating static blog with Sapper, TailwindCSS and Github pages. In this part we are going to add categories and pagination to our blog.\u003C\u002Fp\u003E\n\u003Cp\u003EFirst of all, let&#39;s create pagination component:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-html\"\u003E\u003Cspan class=\"hljs-comment\"\u003E&lt;!-- src\u002Fcomponents\u002FPagination.svelte --&gt;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"javascript\"\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E prevLink = \u003Cspan class=\"hljs-literal\"\u003Enull\u003C\u002Fspan\u003E, nextLink = \u003Cspan class=\"hljs-literal\"\u003Enull\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\n{#if prevLink || nextLink}\n  \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"flex justify-between border-t border-black py-4\"\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n    {#if prevLink}\n      \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Ea\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-attr\"\u003Erel\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"prefetch\"\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-attr\"\u003Ehref\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E{prevLink}\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"text-gray-600 hover:text-gray-900 hover:underline\"\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n        Older\n      \u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Ea\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n    {\u002Fif}\n    {#if nextLink}\n      \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Ea\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-attr\"\u003Erel\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"prefetch\"\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-attr\"\u003Ehref\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E{nextLink}\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"ml-auto text-gray-600 hover:text-gray-900 hover:underline\"\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n        Newer\n      \u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Ea\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n    {\u002Fif}\n  \u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n{\u002Fif}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EAnd modify \u003Ccode\u003EItem\u003C\u002Fcode\u003E component:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-diff\"\u003E&lt;a class=\"block mt-6\" href={`\u002Fblog\u002F${post.slug}`} rel=\"prefetch\"&gt;\n\u003Cspan class=\"hljs-addition\"\u003E+ &lt;h4 class=\"font-medium\"&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-addition\"\u003E+   {#each post.categories as category, i}\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-addition\"\u003E+     &lt;a\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-addition\"\u003E+       rel=\"prefetch\"\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-addition\"\u003E+       href={`blog\u002Fcategory\u002F${category}`}\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-addition\"\u003E+       class=\"text-gray-600 hover:text-gray-900 hover:underline\"&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-addition\"\u003E+       {category}{i !== post.categories.length - 1 ? ', ' : ''}\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-addition\"\u003E+     &lt;\u002Fa&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-addition\"\u003E+   {\u002Feach}\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-addition\"\u003E+ &lt;\u002Fh4&gt;\u003C\u002Fspan\u003E\n  &lt;h3\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EThen, we need to modify \u003Ccode\u003Esrc\u002Froutes\u002Fblog\u002F_posts.js\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-javascript\"\u003E\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F before\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E { title, description, created, updated } = data\n\n\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F after\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E { title, description, created, updated, categories } = data\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EAnd also include \u003Ccode\u003Ecategories\u003C\u002Fcode\u003E in object returned from this function.\u003C\u002Fp\u003E\n\u003Cp\u003EAs you might remember, this data comes from our \u003Ccode\u003E.md\u003C\u002Fcode\u003E files with help of \u003Ca target=\"_blank\" rel=\"nofollow\" class=\"link\" href=\"https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002Fgray-matter\"\u003Egray-mater\u003C\u002Fa\u003E package. So, now we can add categories field to all of our posts. For example:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-javascript\"\u003E---\ncategories: [\u003Cspan class=\"hljs-string\"\u003E'Svelte'\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E'Sapper'\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E'TailwindCSS'\u003C\u002Fspan\u003E]\n---\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EThen, we will create \u003Ccode\u003Esrc\u002Futils.js\u003C\u002Fcode\u003E file with one constant and one function:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-javascript\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E POSTS_PER_PAGE = \u003Cspan class=\"hljs-number\"\u003E5\u003C\u002Fspan\u003E;\n\n\u003Cspan class=\"hljs-keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E getParams = \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-params\"\u003Eparams\u003C\u002Fspan\u003E =&gt;\u003C\u002Fspan\u003E {\n  \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E { rest } = params;\n  \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E category = rest[\u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E] === \u003Cspan class=\"hljs-string\"\u003E\"category\"\u003C\u002Fspan\u003E ? rest[\u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E] : \u003Cspan class=\"hljs-literal\"\u003Enull\u003C\u002Fspan\u003E;\n  \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E page = rest.length === \u003Cspan class=\"hljs-number\"\u003E4\u003C\u002Fspan\u003E ? rest[\u003Cspan class=\"hljs-number\"\u003E3\u003C\u002Fspan\u003E] : category ? \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E : rest[\u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E];\n\n  \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E { category, page };\n};\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EI am pretty sure you got what constant means, but for function, I will explain. We will support blog urls with formats:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003E\u002Fblog\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003E\u002Fblog\u002Fcategory\u002F{{category}}\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003E\u002Fblog\u002Fpage\u002F{{page}}\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003E\u002Fblog\u002Fcategory\u002F{{category}}\u002Fpage{{page}}\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Ccode\u003EgetParams\u003C\u002Fcode\u003E function is desired to take params from url, and extract \u003Ccode\u003Ecategory\u003C\u002Fcode\u003E and \u003Ccode\u003Epage\u003C\u002Fcode\u003E. The fallback value for \u003Ccode\u003Ecategory\u003C\u002Fcode\u003E is null, but for \u003Ccode\u003Epage\u003C\u002Fcode\u003E is 1.\u003C\u002Fp\u003E\n\u003Cp\u003ENow, we can start modifying \u003Ccode\u003E*.json.js\u003C\u002Fcode\u003E and route \u003Ccode\u003E*.svelte\u003C\u002Fcode\u003E files. Let&#39;s start with simple one, \u003Ccode\u003Esrc\u002Froutes\u002Fblog\u002Flatest.json.js\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-diff\"\u003E  created: post.created,\n\u003Cspan class=\"hljs-deletion\"\u003E- excerpt: post.excerpt\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-addition\"\u003E+ excerpt: post.excerpt,\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-addition\"\u003E+ categories: post.categories\u003C\u002Fspan\u003E\n};\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EThen, \u003Ccode\u003Esrc\u002Froutes\u002Fblog\u002Findex.json.js\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-javascript\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E posts \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E\".\u002F_posts.js\"\u003C\u002Fspan\u003E;\n\u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E { POSTS_PER_PAGE } \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E\"..\u002F..\u002Futils.js\"\u003C\u002Fspan\u003E;\n\n\u003Cspan class=\"hljs-keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Eget\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Ereq, res\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n  \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E paginated = posts.slice(\u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E, POSTS_PER_PAGE);\n\n  \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E mapped = paginated.map(\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-params\"\u003Epost\u003C\u002Fspan\u003E =&gt;\u003C\u002Fspan\u003E ({\n    \u003Cspan class=\"hljs-attr\"\u003Etitle\u003C\u002Fspan\u003E: post.title,\n    \u003Cspan class=\"hljs-attr\"\u003Eslug\u003C\u002Fspan\u003E: post.slug,\n    \u003Cspan class=\"hljs-attr\"\u003Ecreated\u003C\u002Fspan\u003E: post.created,\n    \u003Cspan class=\"hljs-attr\"\u003Eexcerpt\u003C\u002Fspan\u003E: post.excerpt,\n    \u003Cspan class=\"hljs-attr\"\u003Ecategories\u003C\u002Fspan\u003E: post.categories\n  }));\n\n  res.writeHead(\u003Cspan class=\"hljs-number\"\u003E200\u003C\u002Fspan\u003E, {\n    \u003Cspan class=\"hljs-string\"\u003E\"Content-Type\"\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E\"application\u002Fjson\"\u003C\u002Fspan\u003E\n  });\n\n  res.end(\n    \u003Cspan class=\"hljs-built_in\"\u003EJSON\u003C\u002Fspan\u003E.stringify({\n      \u003Cspan class=\"hljs-attr\"\u003Eposts\u003C\u002Fspan\u003E: mapped,\n      \u003Cspan class=\"hljs-attr\"\u003EhasMore\u003C\u002Fspan\u003E: posts.length &gt; POSTS_PER_PAGE\n    })\n  );\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EFinally, modify \u003Ccode\u003Esrc\u002Froutes\u002Fblog\u002Findex.svelte\u003C\u002Fcode\u003E. \u003Ccode\u003Econtext=&quot;module&quot;\u003C\u002Fcode\u003E part:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-diff\"\u003E&lt;script context=\"module\"&gt;\n  export function preload({ params, query }) {\n    return this.fetch(`blog.json`)\n      .then(r =&gt; r.json())\n\u003Cspan class=\"hljs-deletion\"\u003E-     .then(posts =&gt; {\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-deletion\"\u003E-       return { posts };\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-addition\"\u003E+     .then(({ posts, hasMore }) =&gt; {\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-addition\"\u003E+       return { posts, hasMore };\u003C\u002Fspan\u003E\n      });\n  }\n&lt;\u002Fscript&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EAlso, import \u003Ccode\u003EPagination\u003C\u002Fcode\u003E component, expose \u003Ccode\u003EhasMore\u003C\u002Fcode\u003E prop, and add \u003Ccode\u003EPagination\u003C\u002Fcode\u003E to template:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-html\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003EPagination\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003EprevLink\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E{hasMore\u003C\u002Fspan\u003E ? '\u003Cspan class=\"hljs-attr\"\u003Eblog\u003C\u002Fspan\u003E\u002F\u003Cspan class=\"hljs-attr\"\u003Epage\u003C\u002Fspan\u003E\u002F\u003Cspan class=\"hljs-attr\"\u003E2\u003C\u002Fspan\u003E' \u003Cspan class=\"hljs-attr\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Enull\u003C\u002Fspan\u003E} \u002F&gt;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003ELastly, we need to add 2 more files to \u003Ccode\u003Esrc\u002Froutes\u002Fblog\u003C\u002Fcode\u003E - \u003Ca target=\"_blank\" rel=\"nofollow\" class=\"link\" href=\"https:\u002F\u002Fgithub.com\u002Fchuvikovd\u002Fsapper-blog-tutorial\u002Fcommit\u002F1ecd0733d40a4dab41445468a8df45124348a2e4#diff-fc9addbb5f278dca41d7914980ca47b2R1\"\u003E[...rest].json.js\u003C\u002Fa\u003E and \u003Ca target=\"_blank\" rel=\"nofollow\" class=\"link\" href=\"https:\u002F\u002Fgithub.com\u002Fchuvikovd\u002Fsapper-blog-tutorial\u002Fcommit\u002F1ecd0733d40a4dab41445468a8df45124348a2e4#diff-8685983ab3933e710ae9668373a08f8dR1\"\u003E[...rest].svelte\u003C\u002Fa\u003E. You can see contents by following links.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003ENote: before starting to work on this part, I created more example posts in tutorial project using \u003Ca target=\"_blank\" rel=\"nofollow\" class=\"link\" href=\"https:\u002F\u002Fjaspervdj.be\u002Florem-markdownum\u002F\"\u003ELorem Markdownum\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003ENow, our blog is categorized and properly paginated, give a try by running:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-bash\"\u003Eyarn dev\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eand following \u003Ca target=\"_blank\" rel=\"nofollow\" class=\"link\" href=\"http:\u002F\u002Flocalhost:3000\"\u003Ehttp:\u002F\u002Flocalhost:3000\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThat&#39;s all for this part. Stay tuned, more interesting stuff is coming.\u003C\u002Fp\u003E\n",created:"2020-03-21T14:16:00.485Z",excerpt:"\u003Cp\u003EThis is the third part of the \u003Ca class=\"link\" href=\".\u002Fblog\u002Fcreating-static-blog\"\u003Etutorial series\u003C\u002Fa\u003E about creating static blog with Sapper, TailwindCSS and Github pages. In this part we are going to add categories and pagination to our blog.\u003C\u002Fp\u003E\n",categories:["Svelte","Sapper","TailwindCSS"],time:"3 min read"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');(function(){try{eval("async function x(){}");var main="/client/client.9b7c1ebe.js"}catch(e){main="/client/legacy/client.430c5205.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> 